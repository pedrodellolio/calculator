<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="calculator">
      <div class="visor">
        <input
          type="text"
          id="expression"
          name="expression"
          value=""
          readonly
        />
      </div>
      <div class="grid">
        <div onclick="insert('')" class="grid-item"></div>
        <div onclick="insert('C')" class="grid-item">C</div>
        <div onclick="insert('/')" class="grid-item division">÷</div>
        <div onclick="insert(' ')" class="grid-item">
          <span class="material-symbols-rounded"> backspace </span>
        </div>
        <div onclick="insert(7)" class="grid-item">7</div>
        <div onclick="insert(8)" class="grid-item">8</div>
        <div onclick="insert(9)" class="grid-item">9</div>
        <div onclick="insert('*')" class="grid-item">*</div>
        <div onclick="insert(4)" class="grid-item">4</div>
        <div onclick="insert(5)" class="grid-item">5</div>
        <div onclick="insert(6)" class="grid-item">6</div>
        <div onclick="insert('-')" class="grid-item">-</div>
        <div onclick="insert(1)" class="grid-item">1</div>
        <div onclick="insert(2)" class="grid-item">2</div>
        <div onclick="insert(3)" class="grid-item">3</div>
        <div onclick="insert('+')" class="grid-item">+</div>
        <div onclick="insert('')" class="grid-item"></div>
        <div onclick="insert(0)" class="grid-item">0</div>
        <div onclick="insert('.')" class="grid-item">.</div>
        <div onclick="insert('=')" class="grid-item result">=</div>
      </div>
    </div>

    <footer>
      <p>2023 - Pedro Dell'Olio</p>
    </footer>
    <!-- <script src="script.js"></script> -->
    <script>
      const expression = document.querySelector("#expression");

      window.onload = () => {
        expression.value = "";
      };

      function insert(value) {
        if (value === "=") {
          expression.value = eval(expression.value);
          if (isNaN(expression.value)) expression.value = "Indefinido";
        } else if (value === "C") {
          expression.value = "";
        } else if (value === " ") {
          expression.value = expression.value.slice(0, -1);
        } else if (typeof value === "number") expression.value += value;
        else {
          //operações
          if (expression.value.match(/[-\.+*/%]$/)) {
            expression.value = expression.value.slice(0, -1);
          }
          expression.value += value;
        }
      }
    </script>
  </body>
</html>
